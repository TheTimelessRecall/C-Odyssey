name: C Odyssey CI

on:
  push:
    branches: [ "master", "main" ]
  pull_request:
    branches: [ "master", "main" ]

jobs:
  quality-check:
    name: ğŸ›¡ï¸ Quality & Build
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v4

    - name: ğŸ› ï¸ Install Tools
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential clang-format

    - name: ğŸ¨ Check Code Style
      run: |
        # This command looks for all .c files and checks them against your .clang-format
        # If any file is messy, the build fails immediately.
        find . -name "*.c" -not -path "./.*" | xargs clang-format --dry-run --Werror

    - name: ğŸ—ï¸ Compile Everything
      run: make